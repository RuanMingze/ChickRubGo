<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChickRubGo - 智能搜索引擎</title>
    <link rel="icon" type="image/png" href="./favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="./style.css">
    <!-- 使用UMD版本的FFmpeg -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ffmpeg/0.12.15/umd/ffmpeg.min.js"></script>
</head>
<body>
    <div class="settings-panel" id="settings-panel">
        <div class="settings-content">
            <h3>设置选项</h3>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="show-wallpaper" checked> <span>显示壁纸</span>
                </label>
            </div>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="show-time" checked> <span>显示时间</span>
                </label>
            </div>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="dark-mode"> <span>深色模式</span>
                </label>
            </div>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="show-animations" checked> <span>显示淡入动画</span>
                </label>
            </div>
            <div class="setting-item">
                <label for="search-engine">搜索引擎：</label>
                <select id="search-engine" onchange="updateCustomSearchInput()">
                    <option value="https://cn.bing.com/search?q=%text%">必应搜索</option>
                    <option value="https://www.baidu.com/s?wd=%text%">百度搜索</option>
                    <option value="custom">自定义</option>
                </select>
            </div>
            <div class="setting-item custom-search-container" id="custom-search-container">
                <label for="custom-search-url">自定义搜索引擎URL：</label>
                <input type="text" id="custom-search-url" placeholder="例如: https://example.com/search?q=%text%" class="setting-input">
                <small class="setting-hint">提示: 使用 %text% 作为搜索词的占位符</small>
            </div>
            <div class="setting-item">
                <label for="weather-api-key">OpenWeatherMap API Key：</label>
                <input type="text" id="weather-api-key" placeholder="输入你的API Key" class="setting-input">
                <small class="setting-hint">获取API Key: <a href="https://openweathermap.org/api" target="_blank" rel="noopener">OpenWeatherMap</a></small>
            </div>
            <div class="setting-item">
                <label for="auto-location">自动获取定位：</label>
                <input type="checkbox" id="auto-location" class="setting-checkbox">
                <small class="setting-hint">开启后会自动获取你的位置</small>
            </div>
            <div class="setting-item">
                <label for="weather-city">城市（拼音）：</label>
                <input type="text" id="weather-city" placeholder="例如：deqing" class="setting-input">
                <small class="setting-hint">当自动定位关闭时使用</small>
            </div>
            <div class="setting-item">
                <label for="bg-music">背景音乐：</label>
                <input type="file" id="bg-music" accept="audio/*,video/mp4" class="setting-input">
                <small class="setting-hint" id="bg-music-info">未选择音乐文件</small>
                <div class="music-controls" id="music-controls">
                    <button class="music-control-btn" id="music-play-pause" title="播放/暂停">
                        <i class="fa-solid fa-play"></i>
                    </button>
                    <input type="range" id="music-volume" min="0" max="1" step="0.1" value="0.3" class="music-volume-slider" title="调整音量">
                    <small class="music-volume-label" id="music-volume-label">30%</small>
                </div>
            </div>
        </div>
        <button class="reset-settings" id="reset-settings">
            <i class="fa-solid fa-trash"></i> 恢复默认设置
        </button>
        <div class="settings-buttons">
            <button class="close-settings" id="close-settings">保存并关闭</button>
            <button class="cancel-settings" id="cancel-settings">放弃更改</button>
        </div>
    </div>

    <div class="widgets-panel" id="widgets-panel">
        <div class="widgets-content">
            <h3>小组件</h3>
            <div class="widgets-grid">
                <div class="widget-item" data-widget="notepad">
                    <i class="fa-solid fa-note-sticky"></i>
                    <span>记事本</span>
                </div>
                <div class="widget-item" data-widget="weather">
                    <i class="fa-solid fa-cloud-sun"></i>
                    <span>天气</span>
                </div>
                <div class="widget-item" data-widget="wooden-fish">
                    <i class="fa-solid fa-cookie"></i>
                    <span>木鱼</span>
                </div>
            </div>
            <button class="close-widgets" id="close-widgets">关闭</button>
        </div>
    </div>

    <!-- 记事本窗口 -->
    <div class="widget-window" id="notepad-window">
        <div class="widget-window-header">
            <h4>记事本</h4>
            <button class="close-window" data-window="notepad-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="file-toolbar">
            <button class="file-btn" id="file-find" title="查找">
                <i class="fa-solid fa-search"></i>
                <span>查找</span>
            </button>
            <button class="file-btn" id="file-replace" title="替换">
                <i class="fa-solid fa-exchange-alt"></i>
                <span>替换</span>
            </button>
            <div class="file-divider"></div>
            <button class="file-btn" id="file-import" title="导入">
                <i class="fa-solid fa-file-import"></i>
                <span>导入</span>
            </button>
            <button class="file-btn" id="file-export" title="导出">
                <i class="fa-solid fa-file-export"></i>
                <span>导出</span>
            </button>
        </div>
        <div class="md-toolbar">
            <button class="md-btn" data-md="h1" title="标题 1">
                <i class="fa-solid fa-heading"></i>
                <span>H1</span>
            </button>
            <button class="md-btn" data-md="h2" title="标题 2">
                <i class="fa-solid fa-heading"></i>
                <span>H2</span>
            </button>
            <button class="md-btn" data-md="h3" title="标题 3">
                <i class="fa-solid fa-heading"></i>
                <span>H3</span>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn" data-md="bold" title="粗体">
                <i class="fa-solid fa-bold"></i>
            </button>
            <button class="md-btn" data-md="italic" title="斜体">
                <i class="fa-solid fa-italic"></i>
            </button>
            <button class="md-btn" data-md="strikethrough" title="删除线">
                <i class="fa-solid fa-strikethrough"></i>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn" data-md="list-ul" title="无序列表">
                <i class="fa-solid fa-list-ul"></i>
            </button>
            <button class="md-btn" data-md="list-ol" title="有序列表">
                <i class="fa-solid fa-list-ol"></i>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn" data-md="link" title="链接">
                <i class="fa-solid fa-link"></i>
            </button>
            <button class="md-btn" data-md="image" title="图片">
                <i class="fa-solid fa-image"></i>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn" data-md="code" title="代码">
                <i class="fa-solid fa-code"></i>
            </button>
            <button class="md-btn" data-md="quote" title="引用">
                <i class="fa-solid fa-quote-right"></i>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn md-btn-preview" id="md-preview-btn" title="预览">
                <i class="fa-solid fa-eye"></i>
                <span>预览</span>
            </button>
            <button class="md-btn md-btn-edit" id="md-edit-btn" title="编辑">
                <i class="fa-solid fa-edit"></i>
                <span>编辑</span>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="notepad-editor" id="notepad-editor">
                <textarea id="notepad-content" placeholder="在这里记录你的想法..."></textarea>
            </div>
            <div class="notepad-preview" id="notepad-preview"></div>
        </div>
    </div>

    <!-- 天气窗口 -->
    <div class="widget-window" id="weather-window">
        <div class="widget-window-header">
            <h4>天气</h4>
            <button class="close-window" data-window="weather-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="weather-content" id="weather-content">
                <div class="weather-loading">
                    <i class="fa-solid fa-spinner fa-spin"></i>
                    <p>正在加载天气...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 木鱼窗口 -->
    <div class="widget-window" id="wooden-fish-window">
        <div class="widget-window-header">
            <h4>木鱼</h4>
            <button class="close-window" data-window="wooden-fish-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="wooden-fish-container">
                <div class="wooden-fish" id="wooden-fish">
                    <img src="Assets/Default.png" alt="木鱼" class="wooden-fish-image" id="wooden-fish-image">
                </div>
                <div class="wooden-fish-count">
                    <p>功德: <span id="merit-count">0</span></p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="time-section" data-aos="fade-up" data-aos-duration="1000">
        <div class="time-display" id="time-display">00:00:00</div>
        <div class="date-display" id="date-display">2026年1月24日 星期日</div>
    </div>
    
    <div class="container">
        <div class="operation-section" data-aos="fade-right" data-aos-duration="800" data-aos-delay="200">
            <button class="mode-toggle-btn" id="mode-toggle-btn" title="切换模式">
                <i class="fa-solid fa-leaf"></i>
            </button>
            
            <button class="refresh-wallpaper-btn" id="refresh-wallpaper-btn" title="刷新壁纸">
                <i class="fa-solid fa-sync-alt"></i>
            </button>
            
            <button class="settings-btn" id="settings-btn" title="打开设置菜单">
                <i class="fa-solid fa-gear"></i>
            </button>
        </div>
        
        <div class="brand-section" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="300">
            <h1 class="brand-logo">ChickRubGo</h1>
            <p class="brand-slogan">探索未知，一键直达</p>
        </div>

        <div class="search-card" data-aos="fade-up" data-aos-duration="1200" data-aos-delay="500">
            <div class="search-box">
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
                <input type="text" id="search-input" placeholder="输入你想搜索的内容，回车或点击搜索">
                <button class="search-btn" id="search-btn">
                    <i class="fa-solid fa-search"></i>
                    搜索
                </button>
            </div>

            <div class="quick-search" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="700">
                <div class="quick-title">
                    <i class="fa-solid fa-fire-flame-curved"></i>
                    热门搜索
                </div>
                <div class="tag-container">
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="800">前端开发</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="850">AI工具</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="900">科技资讯</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="950">设计资源</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="1000">学习教程</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="1050">影视推荐</div>
                </div>
            </div>
        </div>
        
        <div class="widgets-section" data-aos="fade-up" data-aos-duration="1200" data-aos-delay="1100">
            <div class="widgets-title">
                <i class="fa-solid fa-puzzle-piece"></i>
                小组件
            </div>
            <div class="widgets-container">
                <div class="widget-item" data-widget="notepad" data-aos="fade-up" data-aos-delay="1200">
                    <i class="fa-solid fa-note-sticky"></i>
                    <span>记事本</span>
                </div>
                <div class="widget-item" data-widget="weather" data-aos="fade-up" data-aos-delay="1250">
                    <i class="fa-solid fa-cloud-sun"></i>
                    <span>天气</span>
                </div>
                <div class="widget-item" data-widget="wooden-fish" data-aos="fade-up" data-aos-delay="1300">
                    <i class="fa-solid fa-cookie"></i>
                    <span>木鱼</span>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-tip" id="loading">
        <i class="fa-solid fa-spinner fa-spin"></i>
        正在加载精美壁纸...
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="./renderer.js"></script>
    
    <!-- 自定义弹窗结构 -->
    <div id="custom-alert" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-header">
                <h3 id="alert-title"></h3>
                <button class="custom-alert-close" id="alert-close">&times;</button>
            </div>
            <div class="custom-alert-body">
                <p id="alert-message"></p>
            </div>
        </div>
    </div>
    
    <!-- 自定义确认框结构 -->
    <div id="custom-confirm" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-header">
                <h3 id="confirm-title"></h3>
                <button class="custom-alert-close" id="confirm-close">&times;</button>
            </div>
            <div class="custom-alert-body">
                <p id="confirm-message"></p>
            </div>
            <div class="custom-alert-footer">
                <button class="custom-confirm-btn" id="confirm-btn">确认</button>
                <button class="custom-cancel-btn" id="cancel-btn">取消</button>
            </div>
        </div>
    </div>
    
    <!-- 自定义文本输入框结构 -->
    <div id="custom-prompt" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-header">
                <h3 id="prompt-title"></h3>
                <button class="custom-alert-close" id="prompt-close">&times;</button>
            </div>
            <div class="custom-alert-body">
                <p id="prompt-message"></p>
                <input type="text" id="prompt-input" class="prompt-input" placeholder="请输入内容">
            </div>
            <div class="custom-alert-footer">
                <button class="custom-confirm-btn" id="prompt-confirm-btn">确认</button>
                <button class="custom-cancel-btn" id="prompt-cancel-btn">取消</button>
            </div>
        </div>
    </div>
</body>
</html>