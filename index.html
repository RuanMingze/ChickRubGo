<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ChickRubGo - 现代化的智能搜索引擎界面，集成丰富的小组件功能">
    <title>ChickRubGo - 智能搜索引擎</title>
    <link rel="icon" type="image/png" href="./favicon.png">
    <link rel="apple-touch-icon" href="./favicon.png">
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="./style.css">
    <!-- 使用UMD版本的FFmpeg -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ffmpeg/0.12.15/umd/ffmpeg.min.js"></script>
</head>
<body>
    <div class="settings-panel" id="settings-panel">
        <div class="settings-content">
            <h3>设置选项</h3>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="show-wallpaper" checked> <span>显示壁纸</span>
                </label>
            </div>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="show-time" checked> <span>显示时间</span>
                </label>
            </div>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="dark-mode"> <span>深色模式</span>
                </label>
            </div>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="show-animations" checked> <span>显示淡入动画</span>
                </label>
            </div>
            <div class="setting-item">
                <label for="search-engine">搜索引擎：</label>
                <select id="search-engine" onchange="updateCustomSearchInput()">
                    <option value="https://cn.bing.com/search?q=%text%">必应搜索</option>
                    <option value="https://www.baidu.com/s?wd=%text%">百度搜索</option>
                    <option value="custom">自定义</option>
                </select>
            </div>
            <div class="setting-item custom-search-container" id="custom-search-container">
                <label for="custom-search-url">自定义搜索引擎URL：</label>
                <input type="text" id="custom-search-url" placeholder="例如: https://example.com/search?q=%text%" class="setting-input">
                <small class="setting-hint">提示: 使用 %text% 作为搜索词的占位符</small>
            </div>
            <div class="setting-item">
                <label for="search-target">搜索方式：</label>
                <select id="search-target">
                    <option value="_blank">新标签页搜索</option>
                    <option value="_self">当前页面重定向</option>
                </select>
            </div>
            <div class="setting-item">
                <label for="weather-api-key">OpenWeatherMap API Key：</label>
                <input type="text" id="weather-api-key" placeholder="输入你的API Key" class="setting-input">
                <small class="setting-hint">获取API Key: <a href="https://openweathermap.org/api" target="_blank" rel="noopener">OpenWeatherMap</a></small>
            </div>
            <div class="setting-item">
                <label for="auto-location">自动获取定位：</label>
                <input type="checkbox" id="auto-location" class="setting-checkbox">
                <small class="setting-hint">开启后会自动获取你的位置</small>
            </div>
            <div class="setting-item">
                <label for="weather-city">城市（拼音）：</label>
                <input type="text" id="weather-city" placeholder="例如：deqing" class="setting-input">
                <small class="setting-hint">当自动定位关闭时使用</small>
            </div>
            <div class="setting-item">
                <label for="bg-music">背景音乐：</label>
                <input type="file" id="bg-music" accept="audio/*,video/mp4" multiple class="setting-input">
                <small class="setting-hint" id="bg-music-info">未选择音乐文件</small>
                <div class="music-controls" id="music-controls">
                    <button class="music-control-btn" id="music-prev" title="上一首">
                        <i class="fa-solid fa-step-backward"></i>
                    </button>
                    <button class="music-control-btn" id="music-play-pause" title="播放/暂停">
                        <i class="fa-solid fa-play"></i>
                    </button>
                    <button class="music-control-btn" id="music-next" title="下一首">
                        <i class="fa-solid fa-step-forward"></i>
                    </button>
                    <div class="current-track" id="current-track">未播放</div>
                    <input type="range" id="music-volume" min="0" max="1" step="0.1" value="0.3" class="music-volume-slider" title="调整音量">
                    <small class="music-volume-label" id="music-volume-label">30%</small>
                </div>
            </div>
        </div>
        <button class="reset-settings" id="reset-settings">
            <i class="fa-solid fa-trash"></i> 恢复默认设置
        </button>
        <div class="settings-buttons">
            <button class="close-settings" id="close-settings">保存并关闭</button>
            <button class="save-only-settings" id="save-only-settings">保存但不刷新</button>
            <button class="cancel-settings" id="cancel-settings">放弃更改</button>
        </div>
    </div>

    <div class="widgets-panel" id="widgets-panel">
        <div class="widgets-content">
            <h3>小组件</h3>
            <div class="widgets-grid">
                <div class="widget-item" data-widget="notepad">
                    <i class="fa-solid fa-note-sticky"></i>
                    <span>记事本</span>
                </div>
                <div class="widget-item" data-widget="weather">
                    <i class="fa-solid fa-cloud-sun"></i>
                    <span>天气</span>
                </div>
                <div class="widget-item" data-widget="wooden-fish">
                    <i class="fa-solid fa-cookie"></i>
                    <span>木鱼</span>
                </div>
                <div class="widget-item" data-widget="time-calendar">
                    <i class="fa-regular fa-clock"></i>
                    <span>时光日历</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                <div class="widget-item" data-widget="todo-list">
                    <i class="fa-solid fa-list-check"></i>
                    <span>待办事项</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                <div class="widget-item" data-widget="drawing-board">
                    <i class="fa-solid fa-palette"></i>
                    <span>画板</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                <div class="widget-item" data-widget="white-noise">
                    <i class="fa-solid fa-volume-high"></i>
                    <span>白噪音</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
            </div>
            <button class="close-widgets" id="close-widgets">关闭</button>
        </div>
    </div>

    <!-- 记事本窗口 -->
    <div class="widget-window" id="notepad-window">
        <div class="widget-window-header">
            <h4>记事本</h4>
            <button class="close-window" data-window="notepad-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="file-toolbar">
            <button class="file-btn" id="file-find" title="查找">
                <i class="fa-solid fa-search"></i>
                <span>查找</span>
            </button>
            <button class="file-btn" id="file-replace" title="替换">
                <i class="fa-solid fa-exchange-alt"></i>
                <span>替换</span>
            </button>
            <div class="file-divider"></div>
            <button class="file-btn" id="file-import" title="导入">
                <i class="fa-solid fa-file-import"></i>
                <span>导入</span>
            </button>
            <button class="file-btn" id="file-export" title="导出">
                <i class="fa-solid fa-file-export"></i>
                <span>导出</span>
            </button>
        </div>
        <div class="md-toolbar">
            <button class="md-btn" data-md="h1" title="标题 1">
                <i class="fa-solid fa-heading"></i>
                <span>H1</span>
            </button>
            <button class="md-btn" data-md="h2" title="标题 2">
                <i class="fa-solid fa-heading"></i>
                <span>H2</span>
            </button>
            <button class="md-btn" data-md="h3" title="标题 3">
                <i class="fa-solid fa-heading"></i>
                <span>H3</span>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn" data-md="bold" title="粗体">
                <i class="fa-solid fa-bold"></i>
            </button>
            <button class="md-btn" data-md="italic" title="斜体">
                <i class="fa-solid fa-italic"></i>
            </button>
            <button class="md-btn" data-md="strikethrough" title="删除线">
                <i class="fa-solid fa-strikethrough"></i>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn" data-md="list-ul" title="无序列表">
                <i class="fa-solid fa-list-ul"></i>
            </button>
            <button class="md-btn" data-md="list-ol" title="有序列表">
                <i class="fa-solid fa-list-ol"></i>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn" data-md="link" title="链接">
                <i class="fa-solid fa-link"></i>
            </button>
            <button class="md-btn" data-md="image" title="图片">
                <i class="fa-solid fa-image"></i>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn" data-md="code" title="代码">
                <i class="fa-solid fa-code"></i>
            </button>
            <button class="md-btn" data-md="quote" title="引用">
                <i class="fa-solid fa-quote-right"></i>
            </button>
            <div class="md-divider"></div>
            <button class="md-btn md-btn-preview" id="md-preview-btn" title="预览">
                <i class="fa-solid fa-eye"></i>
                <span>预览</span>
            </button>
            <button class="md-btn md-btn-edit" id="md-edit-btn" title="编辑">
                <i class="fa-solid fa-edit"></i>
                <span>编辑</span>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="notepad-editor" id="notepad-editor">
                <textarea id="notepad-content" placeholder="在这里记录你的想法..."></textarea>
            </div>
            <div class="notepad-preview" id="notepad-preview"></div>
        </div>
    </div>

    <!-- 天气窗口 -->
    <div class="widget-window" id="weather-window">
        <div class="widget-window-header">
            <h4>天气</h4>
            <button class="close-window" data-window="weather-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="weather-content" id="weather-content">
                <div class="weather-loading">
                    <i class="fa-solid fa-spinner fa-spin"></i>
                    <p>正在加载天气...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 木鱼窗口 -->
    <div class="widget-window" id="wooden-fish-window">
        <div class="widget-window-header">
            <h4>木鱼</h4>
            <button class="close-window" data-window="wooden-fish-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="wooden-fish-container">
                <div class="wooden-fish" id="wooden-fish">
                    <img src="Assets/Default.png" alt="木鱼" class="wooden-fish-image" id="wooden-fish-image">
                </div>
                <div class="wooden-fish-count">
                    <p>功德: <span id="merit-count">0</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- 闹钟窗口 -->
    <div class="widget-window" id="alarm-window">
        <div class="widget-window-header">
            <h4>闹钟</h4>
            <button class="close-window" data-window="alarm-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="alarm-content">
                <div class="alarm-tab-container">
                    <button class="alarm-tab active" data-tab="alarm">闹钟</button>
                    <button class="alarm-tab" data-tab="pomodoro">番茄钟</button>
                </div>
                
                <!-- 闹钟标签内容 -->
                <div class="alarm-tab-content" id="alarm-tab-content">
                    <div class="alarm-setup">
                        <div class="time-picker">
                            <input type="time" id="alarm-time" class="time-input" placeholder="选择时间">
                        </div>
                        <div class="alarm-days">
                            <label class="day-label">
                                <input type="checkbox" class="day-checkbox" value="0">日
                            </label>
                            <label class="day-label">
                                <input type="checkbox" class="day-checkbox" value="1">一
                            </label>
                            <label class="day-label">
                                <input type="checkbox" class="day-checkbox" value="2">二
                            </label>
                            <label class="day-label">
                                <input type="checkbox" class="day-checkbox" value="3">三
                            </label>
                            <label class="day-label">
                                <input type="checkbox" class="day-checkbox" value="4">四
                            </label>
                            <label class="day-label">
                                <input type="checkbox" class="day-checkbox" value="5">五
                            </label>
                            <label class="day-label">
                                <input type="checkbox" class="day-checkbox" value="6">六
                            </label>
                        </div>
                        <div class="alarm-options">
                            <input type="text" id="alarm-label" placeholder="闹钟标签" class="alarm-label-input">
                            <select id="alarm-sound" class="alarm-sound-select" aria-label="选择闹钟铃声">
                                <option value="default">默认铃声</option>
                                <option value="bell">铃声</option>
                                <option value="beep">蜂鸣</option>
                            </select>
                        </div>
                        <button class="add-alarm-btn" id="add-alarm-btn">添加闹钟</button>
                    </div>
                    <div class="alarms-list" id="alarms-list">
                        <!-- 闹钟列表将通过JavaScript动态添加 -->
                    </div>
                </div>
                
                <!-- 番茄钟标签内容 -->
                <div class="alarm-tab-content" id="pomodoro-tab-content">
                    <div class="pomodoro-timer">
                        <div class="pomodoro-display" id="pomodoro-display">25:00</div>
                        <div class="pomodoro-controls">
                            <button class="pomodoro-btn" id="pomodoro-start">开始</button>
                            <button class="pomodoro-btn" id="pomodoro-pause">暂停</button>
                            <button class="pomodoro-btn" id="pomodoro-reset">重置</button>
                        </div>
                    </div>
                    <div class="pomodoro-settings">
                        <h5>设置</h5>
                        <div class="pomodoro-setting">
                            <label>工作时间 (分钟):</label>
                            <input type="number" id="work-time" min="1" max="60" value="25" class="pomodoro-setting-input" aria-label="设置工作时间">
                        </div>
                        <div class="pomodoro-setting">
                            <label>短休息 (分钟):</label>
                            <input type="number" id="short-break" min="1" max="30" value="5" class="pomodoro-setting-input" aria-label="设置短休息时间">
                        </div>
                        <div class="pomodoro-setting">
                            <label>长休息 (分钟):</label>
                            <input type="number" id="long-break" min="1" max="60" value="15" class="pomodoro-setting-input" aria-label="设置长休息时间">
                        </div>
                        <div class="pomodoro-setting">
                            <label>工作轮次:</label>
                            <input type="number" id="work-cycles" min="1" max="10" value="4" class="pomodoro-setting-input" aria-label="设置工作轮次">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 计算器窗口 -->
    <div class="widget-window" id="calculator-window">
        <div class="widget-window-header">
            <h4>计算器</h4>
            <button class="close-window" data-window="calculator-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="calculator-container">
                <div class="calculator-display">
                    <div id="calculator-result" class="calculator-result">0</div>
                    <div id="calculator-expression" class="calculator-expression"></div>
                </div>
                <div class="calculator-buttons">
                    <div class="calculator-row">
                        <button class="calculator-btn calculator-btn-clear" data-value="C">C</button>
                        <button class="calculator-btn calculator-btn-backspace" data-value="backspace">&larr;</button>
                        <button class="calculator-btn calculator-btn-percent" data-value="%">%</button>
                        <button class="calculator-btn calculator-btn-operator" data-value="/">÷</button>
                    </div>
                    <div class="calculator-row">
                        <button class="calculator-btn calculator-btn-number" data-value="7">7</button>
                        <button class="calculator-btn calculator-btn-number" data-value="8">8</button>
                        <button class="calculator-btn calculator-btn-number" data-value="9">9</button>
                        <button class="calculator-btn calculator-btn-operator" data-value="*">×</button>
                    </div>
                    <div class="calculator-row">
                        <button class="calculator-btn calculator-btn-number" data-value="4">4</button>
                        <button class="calculator-btn calculator-btn-number" data-value="5">5</button>
                        <button class="calculator-btn calculator-btn-number" data-value="6">6</button>
                        <button class="calculator-btn calculator-btn-operator" data-value="-">-</button>
                    </div>
                    <div class="calculator-row">
                        <button class="calculator-btn calculator-btn-number" data-value="1">1</button>
                        <button class="calculator-btn calculator-btn-number" data-value="2">2</button>
                        <button class="calculator-btn calculator-btn-number" data-value="3">3</button>
                        <button class="calculator-btn calculator-btn-operator" data-value="+">+</button>
                    </div>
                    <div class="calculator-row">
                        <button class="calculator-btn calculator-btn-zero" data-value="0">0</button>
                        <button class="calculator-btn calculator-btn-decimal" data-value=".">.</button>
                        <button class="calculator-btn calculator-btn-equals" data-value="=">=</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 每日一言窗口 -->
    <div class="widget-window" id="daily-quote-window">
        <div class="widget-window-header">
            <h4>每日一言</h4>
            <button class="close-window" data-window="daily-quote-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="daily-quote-container">
                <div class="daily-quote-content" id="daily-quote-content">
                    <div class="daily-quote-loading">
                        <i class="fa-solid fa-spinner fa-spin"></i>
                        <p>正在加载每日一言...</p>
                    </div>
                </div>
                <div class="daily-quote-actions">
                    <button class="refresh-quote-btn" id="refresh-quote-btn">
                        <i class="fa-solid fa-sync-alt"></i>
                        换一个
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 今天吃什么窗口 -->
    <div class="widget-window" id="food-decider-window">
        <div class="widget-window-header">
            <h4>今天吃什么</h4>
            <button class="close-window" data-window="food-decider-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="food-decider-container">
                <div class="food-display" id="food-display">
                    <div class="food-placeholder">
                        <i class="fa-solid fa-question-circle"></i>
                        <p>点击开始按钮随机选择食物</p>
                    </div>
                    <div class="food-result" id="food-result">
                        <div class="food-icon">
                            <i class="fa-solid fa-utensils"></i>
                        </div>
                        <div class="food-name" id="food-name"></div>
                    </div>
                </div>
                <div class="food-controls" id="food-controls">
                    <button class="food-btn start-btn" id="start-food-btn">
                        <i class="fa-solid fa-play"></i>
                        开始
                    </button>
                    <button class="food-btn stop-btn" id="stop-food-btn" disabled>
                        <i class="fa-solid fa-stop"></i>
                        停止
                    </button>
                </div>
                <div class="food-list" id="food-list">
                    <h5>食物列表</h5>
                    <div class="food-items" id="food-items"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 时钟日历小组件窗口 -->
    <div class="widget-window" id="time-calendar-window">
        <div class="widget-window-header">
            <h4>时光日历</h4>
            <button class="close-window" data-window="time-calendar-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="time-calendar-container">
                <div class="clock-display">
                    <div class="clock-face">
                        <div class="clock-center"></div>
                        <div class="clock-hand hour-hand" id="hour-hand"></div>
                        <div class="clock-hand minute-hand" id="minute-hand"></div>
                        <div class="clock-hand second-hand" id="second-hand"></div>
                        <div class="clock-markers">
                            <div class="marker marker-12">12</div>
                            <div class="marker marker-3">3</div>
                            <div class="marker marker-6">6</div>
                            <div class="marker marker-9">9</div>
                        </div>
                    </div>
                    <div class="digital-time" id="digital-time">00:00:00</div>
                    <div class="date-info" id="date-info">2026年1月24日 星期日</div>
                </div>
                <div class="calendar-display">
                    <div class="calendar-header">
                        <button class="calendar-nav" id="prev-month" title="上个月">
                            <i class="fa-solid fa-chevron-left"></i>
                        </button>
                        <div class="calendar-title" id="calendar-title">2026年1月</div>
                        <button class="calendar-nav" id="next-month" title="下个月">
                            <i class="fa-solid fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="calendar-weekdays">
                        <div class="weekday">日</div>
                        <div class="weekday">一</div>
                        <div class="weekday">二</div>
                        <div class="weekday">三</div>
                        <div class="weekday">四</div>
                        <div class="weekday">五</div>
                        <div class="weekday">六</div>
                    </div>
                    <div class="calendar-days" id="calendar-days"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 待办事项窗口 -->
    <div class="widget-window" id="todo-list-window">
        <div class="widget-window-header">
            <h4>待办事项</h4>
            <button class="close-window" data-window="todo-list-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="todo-list-container">
                <!-- 添加待办事项 -->
                <div class="todo-input-section">
                    <input type="text" id="todo-input" placeholder="输入待办事项..." class="todo-input">
                    <button id="add-todo-btn" class="todo-add-btn" title="添加待办事项">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                </div>
                
                <!-- 待办事项列表 -->
                <div class="todo-list" id="todo-list"></div>
                
                <!-- 操作按钮 -->
                <div class="todo-actions">
                    <button id="clear-completed-btn" class="todo-action-btn">
                        <i class="fa-solid fa-check-double"></i> 清除已完成
                    </button>
                    <button id="clear-all-btn" class="todo-action-btn">
                        <i class="fa-solid fa-trash"></i> 清空所有
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 画板窗口 -->
    <div class="widget-window" id="drawing-board-window">
        <div class="widget-window-header">
            <h4>画板</h4>
            <button class="close-window" data-window="drawing-board-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="drawing-board-container">
                <!-- 工具栏 -->
                <div class="drawing-toolbar">
                    <!-- 绘制工具 -->
                    <div class="tool-group">
                        <h5>工具</h5>
                        <div class="tool-buttons">
                            <button class="tool-btn active" data-tool="brush" title="画笔">
                                <i class="fa-solid fa-pencil"></i>
                            </button>
                            <button class="tool-btn" data-tool="eraser" title="橡皮擦">
                                <i class="fa-solid fa-eraser"></i>
                            </button>
                            <button class="tool-btn" data-tool="rectangle" title="矩形">
                                <i class="fa-solid fa-square"></i>
                            </button>
                            <button class="tool-btn" data-tool="circle" title="圆形">
                                <i class="fa-solid fa-circle"></i>
                            </button>
                            <button class="tool-btn" data-tool="line" title="直线">
                                <i class="fa-solid fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 颜色选择 -->
                    <div class="tool-group">
                        <h5>颜色</h5>
                        <div class="color-picker">
                            <input type="color" id="primary-color" class="color-input" value="#000000" title="选择颜色">
                            <div class="color-palette">
                                <div class="color-swatch" data-color="#000000"></div>
                                <div class="color-swatch" data-color="#FF0000"></div>
                                <div class="color-swatch" data-color="#00FF00"></div>
                                <div class="color-swatch" data-color="#0000FF"></div>
                                <div class="color-swatch" data-color="#FFFF00"></div>
                                <div class="color-swatch" data-color="#FF00FF"></div>
                                <div class="color-swatch" data-color="#00FFFF"></div>
                                <div class="color-swatch" data-color="#FFFFFF"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 笔刷大小 -->
                    <div class="tool-group">
                        <h5>笔刷大小</h5>
                        <div class="brush-size">
                            <input type="range" id="brush-size" class="size-slider" min="1" max="50" value="5" title="调整笔刷大小">
                            <span id="brush-size-value">5</span>
                        </div>
                    </div>
                    
                    <!-- 操作按钮 -->
                    <div class="tool-group">
                        <h5>操作</h5>
                        <div class="action-buttons">
                            <button id="clear-canvas-btn" class="action-btn" title="清空画布">
                                <i class="fa-solid fa-trash"></i> 清空
                            </button>
                            <button id="save-canvas-btn" class="action-btn" title="保存画布">
                                <i class="fa-solid fa-download"></i> 保存
                            </button>
                            <button id="undo-btn" class="action-btn" title="撤销">
                                <i class="fa-solid fa-undo"></i> 撤销
                            </button>
                            <button id="redo-btn" class="action-btn" title="重做">
                                <i class="fa-solid fa-redo"></i> 重做
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 画布区域 -->
                <div class="canvas-container">
                    <canvas id="drawing-canvas" class="drawing-canvas"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 白噪音窗口 -->
    <div class="widget-window" id="white-noise-window">
        <div class="widget-window-header">
            <h4>白噪音</h4>
            <button class="close-window" data-window="white-noise-window" title="关闭窗口">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="widget-window-content">
            <div class="white-noise-container">
                <!-- 白噪音列表 -->
                <div class="white-noise-list" id="white-noise-list">
                    <div class="white-noise-item" data-sound="https://image2url.com/r2/default/audio/1770091374653-cd432219-0ba3-4c4b-b1c6-c04d1064ff66.mp3">
                        <i class="fa-solid fa-water"></i>
                        <span>森林流水</span>
                        <button class="play-white-noise-btn" title="播放/暂停">
                            <i class="fa-solid fa-play"></i>
                        </button>
                    </div>
                    <div class="white-noise-item" data-sound="https://image2url.com/r2/default/audio/1770091250976-8f2a9b44-7692-4350-bd24-f9bd2797f7cf.mp3">
                        <i class="fa-solid fa-tree"></i>
                        <span>草原漫步</span>
                        <button class="play-white-noise-btn" title="播放/暂停">
                            <i class="fa-solid fa-play"></i>
                        </button>
                    </div>
                    <div class="white-noise-item" data-sound="https://image2url.com/r2/default/audio/1770091316381-88526774-7a76-4269-9a3e-f591f189bbe9.mp3">
                        <i class="fa-solid fa-snowflake"></i>
                        <span>冰川流水</span>
                        <button class="play-white-noise-btn" title="播放/暂停">
                            <i class="fa-solid fa-play"></i>
                        </button>
                    </div>
                    <div class="white-noise-item" data-sound="https://image2url.com/r2/default/audio/1770091115570-addf6f00-eed6-4941-9914-631b0c842dc4.mp3">
                        <i class="fa-solid fa-mountain"></i>
                        <span>山间小径</span>
                        <button class="play-white-noise-btn" title="播放/暂停">
                            <i class="fa-solid fa-play"></i>
                        </button>
                    </div>
                </div>
                
                <!-- 音量控制 -->
                <div class="white-noise-controls">
                    <label for="white-noise-volume">音量：</label>
                    <input type="range" id="white-noise-volume" class="volume-slider" min="0" max="1" step="0.1" value="0.5">
                    <span id="white-noise-volume-value">50%</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="time-section" data-aos="fade-up" data-aos-duration="1000">
        <div class="time-display" id="time-display">00:00:00</div>
        <div class="date-display" id="date-display">2026年1月24日 星期日</div>
    </div>
    
    <div class="container">
        <div class="operation-section" data-aos="fade-right" data-aos-duration="800" data-aos-delay="200">
            <button class="mode-toggle-btn" id="mode-toggle-btn" title="切换模式">
                <i class="fa-solid fa-leaf"></i>
            </button>
            
            <button class="refresh-wallpaper-btn" id="refresh-wallpaper-btn" title="刷新壁纸">
                <i class="fa-solid fa-sync-alt"></i>
            </button>
            
            <button class="settings-btn" id="settings-btn" title="打开设置菜单">
                <i class="fa-solid fa-gear"></i>
            </button>
            
            <button class="login-btn" id="login-btn" title="登录">
                <i class="fa-solid fa-user"></i>
                登录
            </button>
        </div>
        
        <div class="brand-section" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="300">
            <h1 class="brand-logo">ChickRubGo</h1>
            <p class="brand-slogan">探索未知，一键直达</p>
        </div>

        <div class="search-card" data-aos="fade-up" data-aos-duration="1200" data-aos-delay="500">
            <div class="search-box">
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
                <input type="text" id="search-input" placeholder="输入你想搜索的内容，回车或点击搜索">
                <button class="search-btn" id="search-btn">
                    <i class="fa-solid fa-search"></i>
                    搜索
                </button>
                <div class="suggestions-container" id="suggestions-container">
                    <ul class="suggestions-list" id="suggestions-list"></ul>
                </div>
            </div>

            <div class="quick-search" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="700">
                <div class="quick-title">
                    <i class="fa-solid fa-fire-flame-curved"></i>
                    热门搜索
                </div>
                <div class="tag-container">
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="800">前端开发</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="850">AI工具</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="900">科技资讯</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="950">设计资源</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="1000">学习教程</div>
                    <div class="search-tag" data-aos="fade-up" data-aos-delay="1050">影视推荐</div>
                </div>
            </div>
        </div>
        
        <div class="widgets-section" data-aos="fade-up" data-aos-duration="1200" data-aos-delay="1100">
            <div class="widgets-title">
                <i class="fa-solid fa-puzzle-piece"></i>
                小组件
                <div class="widgets-title-actions">
                    <button class="edit-widgets-btn" id="edit-widgets-btn" title="编辑小组件">
                        <i class="fa-solid fa-edit"></i>
                        编辑
                    </button>
                </div>
            </div>
            <div class="widgets-container" id="widgets-container">
                <div class="widget-item" data-widget="notepad" data-aos="fade-up" data-aos-delay="1200">
                    <i class="fa-solid fa-note-sticky"></i>
                    <span>记事本</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                <div class="widget-item" data-widget="weather" data-aos="fade-up" data-aos-delay="1250">
                    <i class="fa-solid fa-cloud-sun"></i>
                    <span>天气</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                <div class="widget-item" data-widget="wooden-fish" data-aos="fade-up" data-aos-delay="1300">
                    <i class="fa-solid fa-cookie"></i>
                    <span>木鱼</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                <div class="widget-item" data-widget="alarm" data-aos="fade-up" data-aos-delay="1350">
                <i class="fa-solid fa-alarm-clock"></i>
                    <span>闹钟</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                
                <div class="widget-item" data-widget="calculator" data-aos="fade-up" data-aos-delay="1400">
                    <i class="fa-solid fa-calculator"></i>
                    <span>计算器</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                
                <div class="widget-item" data-widget="daily-quote" data-aos="fade-up" data-aos-delay="1450">
                    <i class="fa-solid fa-quote-right"></i>
                    <span>每日一言</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                
                <div class="widget-item" data-widget="food-decider" data-aos="fade-up" data-aos-delay="1500">
                    <i class="fa-solid fa-utensils"></i>
                    <span>今天吃什么</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>

                 <div class="widget-item" data-widget="time-calendar">
                    <i class="fa-solid fa-clock"></i>
                    <span>时光日历</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                
                <div class="widget-item" data-widget="todo-list">
                    <i class="fa-solid fa-list-check"></i>
                    <span>待办事项</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                
                <div class="widget-item" data-widget="drawing-board">
                    <i class="fa-solid fa-palette"></i>
                    <span>画板</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
                
                <div class="widget-item" data-widget="white-noise">
                    <i class="fa-solid fa-volume-high"></i>
                    <span>白噪音</span>
                    <button class="remove-widget-btn" title="隐藏小组件">×</button>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-tip" id="loading">
        <i class="fa-solid fa-spinner fa-spin"></i>
        正在加载精美壁纸...
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="./Supabase-SDK.js"></script>
    <script src="./renderer.js"></script>
    <script>
        // 初始化Supabase客户端
        const supabaseUrl = 'https://pyywrxrmtehucmkpqkdi.supabase.co';
        const supabaseKey = 'sb_publishable_Ztie93n2pi48h_rAIuviyA_ftjAIDuj';
        const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);
        
        // 检测登录状态
        async function checkLoginStatus() {
            const { data: { user } } = await supabaseClient.auth.getUser();
            const loginBtn = document.getElementById('login-btn');
            
            if (user) {
                // 显示用户信息
                loginBtn.innerHTML = `<i class="fa-solid fa-user-check"></i> ${user.user_metadata.full_name || user.user_metadata.name || user.email}`;
                loginBtn.disabled = true;
                loginBtn.style.cursor = 'default';
                loginBtn.style.opacity = '0.8';
            } else {
                // 显示登录按钮
                loginBtn.innerHTML = '<i class="fa-solid fa-user"></i> 登录';
                loginBtn.disabled = false;
                loginBtn.style.cursor = 'pointer';
                loginBtn.style.opacity = '1';
            }
        }
        
        // 登录按钮点击事件
        document.getElementById('login-btn').addEventListener('click', async function() {
            // 使用Supabase的GitHub登录
            const { error } = await supabaseClient.auth.signInWithOAuth({
                provider: 'github',
                options: {
                    redirectTo: 'https://ruanmingze.github.io/ChickRubGo/CallBack.html'
                }
            });
            
            if (error) {
                console.error('登录错误:', error);
            }
        });
        
        // 页面加载时检测登录状态
        window.addEventListener('load', checkLoginStatus);
    </script>
    
    <!-- 自定义弹窗结构 -->
    <div id="custom-alert" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-header">
                <h3 id="alert-title"></h3>
                <button class="custom-alert-close" id="alert-close">&times;</button>
            </div>
            <div class="custom-alert-body">
                <p id="alert-message"></p>
            </div>
        </div>
    </div>
    
    <!-- 自定义确认框结构 -->
    <div id="custom-confirm" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-header">
                <h3 id="confirm-title"></h3>
                <button class="custom-alert-close" id="confirm-close">&times;</button>
            </div>
            <div class="custom-alert-body">
                <p id="confirm-message"></p>
            </div>
            <div class="custom-alert-footer">
                <button class="custom-confirm-btn" id="confirm-btn">确认</button>
                <button class="custom-cancel-btn" id="cancel-btn">取消</button>
            </div>
        </div>
    </div>
    
    <!-- 确认播放框结构 -->
    <div id="custom-confirm-for-confirm-play" class="custom-alert-confirm-play">
        <div class="custom-alert-confirm-play-content">
            <div class="custom-alert-confirm-play-header">
                <h3 id="confirm-play-title"></h3>
                <button class="custom-alert-confirm-play-close" id="confirm-play-close">&times;</button>
            </div>
            <div class="custom-alert-confirm-play-body">
                <p id="confirm-play-message"></p>
            </div>
            <div class="custom-alert-confirm-play-footer">
                <button class="custom-alert-confirm-play-btn" id="confirm-play-btn">确认</button>
                <button class="custom-alert-confirm-play-btn custom-alert-confirm-play-cancel" id="confirm-play-cancel-btn">取消</button>
            </div>
        </div>
    </div>
    
    <!-- 自定义文本输入框结构 -->
    <div id="custom-prompt" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-header">
                <h3 id="prompt-title"></h3>
                <button class="custom-alert-close" id="prompt-close">&times;</button>
            </div>
            <div class="custom-alert-body">
                <p id="prompt-message"></p>
                <input type="text" id="prompt-input" class="prompt-input" placeholder="请输入内容">
            </div>
            <div class="custom-alert-footer">
                <button class="custom-confirm-btn" id="prompt-confirm-btn">确认</button>
                <button class="custom-cancel-btn" id="prompt-cancel-btn">取消</button>
            </div>
        </div>
    </div>
    
    <!-- 页脚 -->
    <footer class="footer">
        <div class="footer-content">
            <p>Ruanm, Inc  保留所有权利</p>
            <span>联系邮箱：<a href="mailto:Xmt20160124@Outlook.com" class="email-link">Xmt20160124@Outlook.com</a></span>
        </div>
    </footer>
    
    <!-- 注册 Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                if (window.location.protocol === 'file:') {
                    console.log('PWA 功能在 file:// 协议下不可用，请使用 HTTP 服务器');
                    return;
                }
                navigator.serviceWorker.register('./service-worker.js')
                    .then((registration) => {
                        console.log('Service Worker 注册成功:', registration);
                    })
                    .catch((error) => {
                        console.log('Service Worker 注册失败:', error);
                    });
            });
        }
    </script>
</body>
</html>